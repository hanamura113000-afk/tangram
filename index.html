<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>タングラム実験</title>
<link rel="stylesheet" href="style.css">
<style>
body {
  font-family: "Noto Sans JP", sans-serif;
  background-color: #f8f9fa;
  text-align: center;
  margin: 0;
}
.hidden { display: none !important; }
.screen { display: flex; justify-content: center; align-items: center; min-height: 100vh; }
.card {
  background: white;
  padding: 24px 32px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 90%;
  max-width: 600px;
}
.card .title {
  font-size: 1.4em;
  font-weight: bold;
  margin-bottom: 16px;
}
.actions { margin-top: 24px; }
button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  background: #4D96FF;
  color: white;
  cursor: pointer;
}
button:hover { background: #357AE8; }
canvas { background: #eee; border-radius: 10px; display: block; margin: 0 auto; }
</style>
</head>
<body>

<!-- スタート画面 -->
<div id="startScreen" class="screen">
  <div class="card">
    <div class="title">タングラム実験</div>
    <p>お名前を入力し、パターンを選んでください。</p>
    <input id="player" placeholder="お名前" style="padding:8px; width:80%; margin:10px 0;">
    <div>
      <label><input type="radio" name="pattern" id="patternA" checked> Aパターン</label><br>
      <label><input type="radio" name="pattern" id="patternB"> Bパターン</label><br>
      <label><input type="radio" name="pattern" id="patternPractice"> 練習</label>
    </div>
    <div class="actions">
      <button id="start">開始</button>
    </div>
  </div>
</div>

<!-- 練習①説明 -->
<div id="practiceIntroScreen" class="screen hidden">
  <div class="card">
    <div class="title">練習について</div>
    <p style="line-height:1.8; text-align:left; white-space:pre-line;">
これから操作方法の練習を2問行います。
枠に当てはめられたら「判定」ボタンを押して次に進んでください。

1問目：回答表示なし
2問目：一瞬だけ回答を表示してから回答

【PCの方】
ピースはクリックした状態でドラッグ、回転は R、反転は F

【スマホの方】
ピースをタップするとつかんで、そのまま移動できます。
回転、反転は下のボタンで行えます。

クリア後、1秒だけ正解を表示する練習を行います。
    </p>
    <div class="actions">
      <button class="primary" onclick="window.__practiceIntroGo()">練習を開始</button>
    </div>
  </div>
</div>

<!-- 練習②説明 -->
<div id="practicePrimeScreen" class="screen hidden">
  <div class="card">
    <div class="title">練習（答え表示バージョン）</div>
    <p>これから、1秒間だけ回答を表示してから解く練習を行います。<br><br>「開始」を押すとカウントダウンが始まります。</p>
    <div class="actions">
      <button class="primary" onclick="window.__practicePrimeGo()">開始</button>
    </div>
  </div>
</div>

<!-- プレイ画面 -->
<div id="ui" class="hidden">
  <div style="margin:10px;">
    <h3 id="puzzleTitle">タイトル</h3>
    <div id="timer">00:00</div>
    <button id="judge">判定</button>
    <button id="backToStart" class="hidden" onclick="location.reload()">スタートに戻る</button>
  </div>
  <div id="stageWrap">
    <canvas id="game"></canvas>
  </div>
  <div id="mobileControls" style="margin:10px;">
    <button id="rotateMobile">回転</button>
    <button id="flipMobile">反転</button>
  </div>
</div>

<!-- カウントダウン -->
<div id="countScreen" class="screen hidden">
  <div style="font-size:60px; font-weight:bold;" id="countdown">3</div>
</div>

<script defer src="tangram.js"></script>
</body>
</html>
